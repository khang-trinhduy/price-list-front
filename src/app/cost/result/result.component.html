<div class="container" *ngIf="price" id="result-table">
  <table class="table-result">
    <tbody>
      <tr>
        <td>Giá xe xuất hóa đơn</td>
        <td>{{ format(price.price) }}</td>
      </tr>
      <tr>
        <td>Lệ phí trước Bạ ({{ percent }}%)</td>
        <td>{{ format(price.prepaidFee) }}</td>
      </tr>
      <tr>
        <td>Phí đăng ký biển số xe</td>
        <td>{{ format(price.licenseFee) }}</td>
      </tr>
      <tr>
        <td>Đăng kiểm</td>
        <td>{{ format(price.registryFee) }}</td>
      </tr>
      <tr>
        <td>Phí đường bộ 12 tháng</td>
        <td>{{ format(price.transitInsuranceFee) }}</td>
      </tr>
      <tr>
        <td>Bảo hiểm dân sự</td>
        <td>{{ format(price.publicInsuranceFee) }}</td>
      </tr>
      <tr>
        <td>Dịch vụ đăng ký xe</td>
        <td>{{ format(price.carRetristrationFee) }}</td>
      </tr>
    </tbody>
  </table>
  <div class="gift-area">
    <div class="vin-gift" *ngIf="fadil">
      <p>
        Ưu đãi 10% cho dòng xe FADIL: <b>{{ format(getGift()) }}</b>
      </p>
      <div class="apply-btn fadil-btn" (click)="apply()">
        Áp dụng
      </div>
    </div>
    <div class="sale-gift">
      <mat-form-field>
        <mat-label>Khuyến mãi</mat-label>
        <input
          #gift
          matInput
          placeholder="VNĐ"
          mask="separator"
          thousandSeparator="."
        />
      </mat-form-field>
      <div class="apply-btn" (click)="addGift(gift.value)">
        Áp dụng
      </div>
    </div>
    <mat-checkbox (change)="updateInsurance()" [(ngModel)]="insurance"
      >Mua bảo hiểm thân vỏ: {{ format(price.carInsuranceFee) }}</mat-checkbox
    >
  </div>
  <h3 class="total-line">Tổng chi phí lăn bánh: {{ format(price.total) }}</h3>
  <div *ngIf="giftline" class="gift-pin">
    <div class="header-line">{{ giftline }}</div>
    <div class="gift-icon">
      <i title="Xóa"
        ><mat-icon (click)="removeGift()" class="remove-icon"
          >backspace</mat-icon
        >
      </i>
    </div>
  </div>
  <div *ngIf="fadilline" class="fadil-pin">
    <div class="header-line">{{ fadilline }}</div>
    <div class="fadil-icon">
      <i title="Xóa"
        ><mat-icon (click)="removeFadil()" class="remove-icon"
          >backspace</mat-icon
        >
      </i>
    </div>
  </div>
  <!-- 
  <app-pin
    class="gift-pin"
    *ngIf="gift > 0"
    [value]="format(gift)"
    [line]="giftline"
    unpin="remove($vent)"
  ></app-pin> -->
  <!-- <i class="final-line" *ngIf="formula">({{ formula }})</i> -->
</div>
<div class="download-btn" (click)="save()">
  <mat-icon>save</mat-icon><span>Tải xuống</span>
</div>
